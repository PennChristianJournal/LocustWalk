extends ../_layout.pug

block content
  h1 
    span Users
    a.pull-right.btn.btn-primary(href='/admin/users/new') New User

  script.
    var deleteUser = function(username, id) {
      if (confirm('Are you sure you want to delete user ' + username + '?')) {
        $('#userid').val(id)
        $('#delete-form').submit()
      }
    }

  form#delete-form(style='display: none' action='/admin/users/delete' method='post')
    input#userid(type='text' name='_id')

  table.table.table-striped
    tr
      th Username
      th Email
      th Actions 

    each user, index in users
      tr
        td #{user.username}
        td #{user.email}
        td
          .btn-group
            //- a.btn.btn-xs.btn-default(href='users/#{user._id}/edit') Edit 
            a.btn.btn-xs.btn-danger(href='#' onclick=`deleteUser("${user.username}", "${user._id}")`) Delete